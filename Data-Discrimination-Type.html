<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Data.Discrimination.Type</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Data-Discrimination-Type.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/Data-Discrimination-Type.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">discrimination-0: Fast generic linear-time discrimination and sorting</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>Trustworthy</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Data.Discrimination.Type</p></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">newtype</span> <a href="#t:Disc">Disc</a> a = <a href="#v:Disc">Disc</a> {<ul class="subs"><li><a href="#v:-37-">(%)</a> :: <span class="keyword">forall</span> b. [(a, b)] -&gt; [[b]]</li></ul>}</li><li class="src short"><a href="#v:discNat">discNat</a> :: <a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.7.0.1/Data-Int.html#t:Int">Int</a> -&gt; <a href="Data-Discrimination-Type.html#t:Disc">Disc</a> <a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.7.0.1/Data-Int.html#t:Int">Int</a></li><li class="src short"><a href="#v:bdiscNat">bdiscNat</a> :: <a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.7.0.1/Data-Int.html#t:Int">Int</a> -&gt; ([v] -&gt; v -&gt; [v]) -&gt; [(<a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.7.0.1/Data-Int.html#t:Int">Int</a>, v)] -&gt; [[v]]</li></ul></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">newtype</span> <a name="t:Disc" class="def">Disc</a> a <a href="src/Data-Discrimination-Type.html#Disc" class="link">Source</a></p><div class="doc"><p>Discriminator</p><p>TODO: use [(a,b)] -&gt; [NonEmpty b] to better indicate safety?</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:Disc" class="def">Disc</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><dl><dt class="src"><a name="v:-37-" class="def">(%)</a> :: <span class="keyword">forall</span> b. [(a, b)] -&gt; [[b]]</dt><dd class="doc empty">&nbsp;</dd></dl><div class="clear"></div></div></td></tr></table></div><div class="subs instances"><p id="control.i:Disc" class="caption collapser" onclick="toggleSection('i:Disc')">Instances</p><div id="section.i:Disc" class="show"><table><tr><td class="src">Contravariant <a href="Data-Discrimination-Type.html#t:Disc">Disc</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">Divisible <a href="Data-Discrimination-Type.html#t:Disc">Disc</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">Decidable <a href="Data-Discrimination-Type.html#t:Disc">Disc</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="Data-Discrimination-Class.html#t:Orderable">Orderable</a> <a href="Data-Discrimination-Type.html#t:Disc">Disc</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="Data-Discrimination-Class.html#t:Disorderable">Disorderable</a> <a href="Data-Discrimination-Type.html#t:Disc">Disc</a></td><td class="doc"><p>Shared bucket set for small integers</p></td></tr><tr><td class="src"><a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.7.0.1/Data-Monoid.html#t:Monoid">Monoid</a> (<a href="Data-Discrimination-Type.html#t:Disc">Disc</a> a)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.7.0.1/Data-Typeable-Internal.html#t:Typeable">Typeable</a> (* -&gt; *) <a href="Data-Discrimination-Type.html#t:Disc">Disc</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><a name="v:discNat" class="def">discNat</a> :: <a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.7.0.1/Data-Int.html#t:Int">Int</a> -&gt; <a href="Data-Discrimination-Type.html#t:Disc">Disc</a> <a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.7.0.1/Data-Int.html#t:Int">Int</a> <a href="src/Data-Discrimination-Type.html#discNat" class="link">Source</a></p><div class="doc"><p>unordered discrimination by bucket, not inherently thread-safe
 but it only has to restore the elements that were used
 unlike the more obvious ST implementation, so it wins by
 a huge margin in a race, especially when we have a large
 keyspace, sparsely used, with low contention.
 This will leak a number of arrays equal to the maximum concurrent
 contention for this resource. If this becomes a bottleneck we can
 make multiple stacks of working pads and index the stack with the
 hash of the current thread id to reduce contention at the expense
 of taking more memory.</p></div></div><div class="top"><p class="src"><a name="v:bdiscNat" class="def">bdiscNat</a> :: <a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.7.0.1/Data-Int.html#t:Int">Int</a> -&gt; ([v] -&gt; v -&gt; [v]) -&gt; [(<a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.7.0.1/Data-Int.html#t:Int">Int</a>, v)] -&gt; [[v]] <a href="src/Data-Discrimination-Type.html#bdiscNat" class="link">Source</a></p></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.15.1</p></div></body></html>